{"version":3,"file":"frosh-cart-archiver-Dn1UO-ou.js","sources":["../../../app/administration/src/module/frosh-archived-carts/page/frosh-archived-carts-list/frosh-archived-carts-list.html.twig","../../../app/administration/src/module/frosh-archived-carts/page/frosh-archived-carts-list/index.js","../../../app/administration/src/module/frosh-archived-carts/page/frosh-archived-carts-detail/frosh-archived-carts-detail.html.twig","../../../app/administration/src/module/frosh-archived-carts/page/frosh-archived-carts-detail/index.js","../../../app/administration/src/module/frosh-archived-carts/index.js"],"sourcesContent":["{% block frosh_archived_carts_list %}\n<sw-page class=\"frosh-archived-carts-list\">\n    {% block frosh_archived_carts_list_smart_bar_header %}\n    <template #smart-bar-header>\n        <h2>{{ $tc('frosh-archived-carts.list.title') }}</h2>\n    </template>\n    {% endblock %}\n\n    {% block frosh_archived_carts_list_content %}\n    <template #content>\n        <sw-entity-listing\n            v-if=\"archivedCarts\"\n            :repository=\"archivedCartRepository\"\n            :items=\"archivedCarts\"\n            :columns=\"columns\"\n            :isLoading=\"isLoading\"\n            :showSelection=\"false\"\n            :allowEdit=\"false\"\n            :allowDelete=\"false\"\n            :allowInlineEdit=\"false\"\n            detailRoute=\"frosh.archived.carts.detail\"\n            @page-change=\"onPageChange\"\n        >\n            {% block frosh_archived_carts_list_column_customer %}\n            <template #column-customer.email=\"{ item }\">\n                {{ getCustomerName(item) }}\n            </template>\n            {% endblock %}\n\n            {% block frosh_archived_carts_list_column_total_price %}\n            <template #column-totalPrice=\"{ item }\">\n                {{ formatPrice(item.totalPrice, item.currencyIsoCode) }}\n            </template>\n            {% endblock %}\n\n            {% block frosh_archived_carts_list_column_sales_channel %}\n            <template #column-salesChannel.name=\"{ item }\">\n                {{ item.salesChannel ? item.salesChannel.name : '-' }}\n            </template>\n            {% endblock %}\n\n            {% block frosh_archived_carts_list_column_created_at %}\n            <template #column-createdAt=\"{ item }\">\n                {{ item.createdAt | date({ hour: '2-digit', minute: '2-digit' }) }}\n            </template>\n            {% endblock %}\n        </sw-entity-listing>\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n","import template from './frosh-archived-carts-list.html.twig';\n\nconst { Criteria } = Shopware.Data;\n\nShopware.Component.register('frosh-archived-carts-list', {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    data() {\n        return {\n            archivedCarts: null,\n            isLoading: true,\n            total: 0,\n            page: 1,\n            limit: 25,\n        };\n    },\n\n    computed: {\n        archivedCartRepository() {\n            return this.repositoryFactory.create('frosh_archived_cart');\n        },\n\n        columns() {\n            return [\n                {\n                    property: 'customer.email',\n                    label: this.$tc('frosh-archived-carts.list.columnCustomer'),\n                    allowResize: true,\n                    primary: true,\n                },\n                {\n                    property: 'totalPrice',\n                    label: this.$tc('frosh-archived-carts.list.columnTotalPrice'),\n                    allowResize: true,\n                },\n                {\n                    property: 'salesChannel.name',\n                    label: this.$tc('frosh-archived-carts.list.columnSalesChannel'),\n                    allowResize: true,\n                },\n                {\n                    property: 'createdAt',\n                    label: this.$tc('frosh-archived-carts.list.columnCreatedAt'),\n                    allowResize: true,\n                },\n            ];\n        },\n\n        criteria() {\n            const criteria = new Criteria(this.page, this.limit);\n            criteria.addAssociation('customer');\n            criteria.addAssociation('salesChannel');\n            criteria.addSorting(Criteria.sort('createdAt', 'DESC'));\n\n            return criteria;\n        },\n    },\n\n    created() {\n        this.loadArchivedCarts();\n    },\n\n    methods: {\n        async loadArchivedCarts() {\n            this.isLoading = true;\n\n            try {\n                const result = await this.archivedCartRepository.search(this.criteria, Shopware.Context.api);\n                this.archivedCarts = result;\n                this.total = result.total;\n            } catch (error) {\n                console.error('Failed to load archived carts:', error);\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        onPageChange({ page, limit }) {\n            this.page = page;\n            this.limit = limit;\n            this.loadArchivedCarts();\n        },\n\n        getCustomerName(item) {\n            if (!item.customer) {\n                return '-';\n            }\n            return `${item.customer.firstName} ${item.customer.lastName} (${item.customer.email})`;\n        },\n\n        formatPrice(price, currencyIsoCode) {\n            return new Intl.NumberFormat('de-DE', {\n                style: 'currency',\n                currency: currencyIsoCode || 'EUR',\n            }).format(price);\n        },\n    },\n});\n","{% block frosh_archived_carts_detail %}\n<sw-page class=\"frosh-archived-carts-detail\">\n    {% block frosh_archived_carts_detail_smart_bar_header %}\n    <template #smart-bar-header>\n        <h2>{{ $tc('frosh-archived-carts.detail.title') }}</h2>\n    </template>\n    {% endblock %}\n\n    {% block frosh_archived_carts_detail_smart_bar_actions %}\n    <template #smart-bar-actions>\n        <sw-button\n            :routerLink=\"{ name: 'frosh.archived.carts.list' }\"\n            variant=\"ghost\"\n        >\n            {{ $tc('global.default.cancel') }}\n        </sw-button>\n    </template>\n    {% endblock %}\n\n    {% block frosh_archived_carts_detail_content %}\n    <template #content>\n        <sw-card-view v-if=\"archivedCart\">\n            {% block frosh_archived_carts_detail_card_info %}\n            <sw-card :title=\"$tc('frosh-archived-carts.detail.cardTitleInfo')\" :isLoading=\"isLoading\">\n                <sw-container columns=\"1fr 1fr\" gap=\"16px\">\n                    <sw-description-list>\n                        <dt>{{ $tc('frosh-archived-carts.detail.labelCustomer') }}</dt>\n                        <dd>\n                            <router-link\n                                v-if=\"archivedCart.customer\"\n                                :to=\"{ name: 'sw.customer.detail', params: { id: archivedCart.customerId } }\"\n                            >\n                                {{ getCustomerName() }}\n                            </router-link>\n                            <template v-else>-</template>\n                        </dd>\n\n                        <dt>{{ $tc('frosh-archived-carts.detail.labelSalesChannel') }}</dt>\n                        <dd>{{ archivedCart.salesChannel ? archivedCart.salesChannel.name : '-' }}</dd>\n                    </sw-description-list>\n\n                    <sw-description-list>\n                        <dt>{{ $tc('frosh-archived-carts.detail.labelTotalPrice') }}</dt>\n                        <dd>{{ formatPrice(archivedCart.totalPrice) }}</dd>\n\n                        <dt>{{ $tc('frosh-archived-carts.detail.labelCreatedAt') }}</dt>\n                        <dd>{{ archivedCart.createdAt | date({ hour: '2-digit', minute: '2-digit' }) }}</dd>\n                    </sw-description-list>\n                </sw-container>\n            </sw-card>\n            {% endblock %}\n\n            {% block frosh_archived_carts_detail_card_line_items %}\n            <sw-card :title=\"$tc('frosh-archived-carts.detail.cardTitleLineItems')\" :isLoading=\"isLoading\">\n                <sw-data-grid\n                    v-if=\"archivedCart.lineItems && archivedCart.lineItems.length > 0\"\n                    :dataSource=\"archivedCart.lineItems\"\n                    :columns=\"lineItemColumns\"\n                    :showSelection=\"false\"\n                    :showActions=\"false\"\n                >\n                    {% block frosh_archived_carts_detail_line_items_column_label %}\n                    <template #column-label=\"{ item }\">\n                        <router-link\n                            v-if=\"item.productId\"\n                            :to=\"{ name: 'sw.product.detail', params: { id: item.productId } }\"\n                        >\n                            {{ getProductName(item) }}\n                        </router-link>\n                        <template v-else>\n                            {{ getProductName(item) }}\n                        </template>\n                    </template>\n                    {% endblock %}\n\n                    {% block frosh_archived_carts_detail_line_items_column_unit_price %}\n                    <template #column-unitPrice=\"{ item }\">\n                        {{ formatPrice(item.unitPrice) }}\n                    </template>\n                    {% endblock %}\n\n                    {% block frosh_archived_carts_detail_line_items_column_total_price %}\n                    <template #column-totalPrice=\"{ item }\">\n                        {{ formatPrice(item.totalPrice) }}\n                    </template>\n                    {% endblock %}\n                </sw-data-grid>\n\n                <sw-empty-state\n                    v-else\n                    :title=\"$tc('frosh-archived-carts.detail.unknownProduct')\"\n                />\n            </sw-card>\n            {% endblock %}\n        </sw-card-view>\n\n        <sw-loader v-else />\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n","import template from './frosh-archived-carts-detail.html.twig';\n\nconst { Criteria } = Shopware.Data;\n\nShopware.Component.register('frosh-archived-carts-detail', {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    props: {\n        archivedCartId: {\n            type: String,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            archivedCart: null,\n            isLoading: true,\n        };\n    },\n\n    computed: {\n        archivedCartRepository() {\n            return this.repositoryFactory.create('frosh_archived_cart');\n        },\n\n        criteria() {\n            const criteria = new Criteria();\n            criteria.addAssociation('customer');\n            criteria.addAssociation('salesChannel');\n            criteria.addAssociation('lineItems.product');\n\n            return criteria;\n        },\n\n        lineItemColumns() {\n            return [\n                {\n                    property: 'label',\n                    label: this.$tc('frosh-archived-carts.detail.columnProduct'),\n                    allowResize: true,\n                    primary: true,\n                },\n                {\n                    property: 'quantity',\n                    label: this.$tc('frosh-archived-carts.detail.columnQuantity'),\n                    allowResize: true,\n                    width: '100px',\n                },\n                {\n                    property: 'unitPrice',\n                    label: this.$tc('frosh-archived-carts.detail.columnUnitPrice'),\n                    allowResize: true,\n                    width: '150px',\n                },\n                {\n                    property: 'totalPrice',\n                    label: this.$tc('frosh-archived-carts.detail.columnTotalPrice'),\n                    allowResize: true,\n                    width: '150px',\n                },\n            ];\n        },\n    },\n\n    created() {\n        this.loadArchivedCart();\n    },\n\n    methods: {\n        async loadArchivedCart() {\n            this.isLoading = true;\n\n            try {\n                this.archivedCart = await this.archivedCartRepository.get(\n                    this.archivedCartId,\n                    Shopware.Context.api,\n                    this.criteria\n                );\n            } catch (error) {\n                console.error('Failed to load archived cart:', error);\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        getCustomerName() {\n            if (!this.archivedCart?.customer) {\n                return '-';\n            }\n            const customer = this.archivedCart.customer;\n            return `${customer.firstName} ${customer.lastName} (${customer.email})`;\n        },\n\n        formatPrice(price) {\n            const currency = this.archivedCart?.currencyIsoCode || 'EUR';\n            return new Intl.NumberFormat('de-DE', {\n                style: 'currency',\n                currency: currency,\n            }).format(price);\n        },\n\n        getProductName(lineItem) {\n            if (lineItem.product) {\n                return lineItem.product.translated?.name || lineItem.product.name;\n            }\n            return lineItem.label || this.$tc('frosh-archived-carts.detail.unknownProduct');\n        },\n    },\n});\n","import './page/frosh-archived-carts-list';\nimport './page/frosh-archived-carts-detail';\n\nimport deDE from './snippet/de-DE.json';\nimport enGB from './snippet/en-GB.json';\n\nShopware.Module.register('frosh-archived-carts', {\n    type: 'plugin',\n    name: 'frosh-archived-carts',\n    title: 'frosh-archived-carts.general.title',\n    description: 'frosh-archived-carts.general.description',\n    color: '#ff6b35',\n    icon: 'regular-shopping-cart',\n\n    snippets: {\n        'de-DE': deDE,\n        'en-GB': enGB,\n    },\n\n    routes: {\n        list: {\n            component: 'frosh-archived-carts-list',\n            path: 'list',\n        },\n        detail: {\n            component: 'frosh-archived-carts-detail',\n            path: 'detail/:id',\n            props: {\n                default: (route) => ({\n                    archivedCartId: route.params.id,\n                }),\n            },\n        },\n    },\n\n    navigation: [{\n        label: 'frosh-archived-carts.general.title',\n        color: '#ff6b35',\n        path: 'frosh.archived.carts.list',\n        icon: 'regular-shopping-cart',\n        parent: 'sw-customer',\n        position: 100,\n    }],\n});\n"],"names":["template$1","Criteria","template","criteria","result","error","page","limit","item","price","currencyIsoCode","_a","customer","currency","lineItem","deDE","enGB","route"],"mappings":"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"}